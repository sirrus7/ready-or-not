# Environment Configuration for Ready-or-Not SSO System
# Copy this file to .env.local for development

# =====================================================
# SUPABASE CONFIGURATION
# =====================================================
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# =====================================================
# JWT TOKEN CONFIGURATION - PHASE 4
# =====================================================

# JWT Mode Control - Set to 'true' to enable real JWT generation
# When 'false', uses mock token generation for testing
VITE_USE_REAL_JWT=true

# Development JWT Secret - HMAC key for HS256 algorithm
# IMPORTANT: Use a strong secret in production, minimum 32 characters
VITE_JWT_SECRET_DEV=your-development-jwt-secret-change-in-production-minimum-32-chars

# Production JWT Keys - RSA keys for RS256 algorithm
# Generate with: openssl genrsa -out private.pem 2048
#               openssl rsa -in private.pem -pubout -out public.pem
# VITE_JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"
# VITE_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"

# JWT Configuration
VITE_JWT_ISSUER=ready-or-not-sso
VITE_JWT_AUDIENCE=ready-or-not
VITE_JWT_EXPIRATION_HOURS=2

# =====================================================
# ENVIRONMENT DETECTION
# =====================================================
VITE_NODE_ENV=development
# Options: development, staging, production

# =====================================================
# SECURITY SETTINGS
# =====================================================

# Token Security
VITE_JWT_MAX_AGE=7200
# Maximum token age in seconds (2 hours = 7200)

# CORS Settings for JWT endpoints
VITE_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
# Comma-separated list of allowed origins

# Rate Limiting (for future token generation API)
VITE_JWT_RATE_LIMIT=100
# Maximum tokens per hour per user

# =====================================================
# DEVELOPMENT AND TESTING
# =====================================================

# Test Configuration
VITEST_JWT_TEST_SECRET=test-secret-for-jwt-testing-12345
# Special secret used during vitest runs

# Debug Logging
VITE_JWT_DEBUG=false
# Set to 'true' to enable detailed JWT logging

# Mock Data Generation
VITE_GENERATE_MOCK_USERS=true
# Enable mock user generation for development

# =====================================================
# PRODUCTION SECURITY NOTES
# =====================================================

# üîê PRODUCTION SECURITY CHECKLIST:
#
# 1. JWT Secrets:
#    - Use cryptographically secure random secrets
#    - Minimum 256 bits (32 characters) for HMAC
#    - Store in secure environment (Supabase Vault recommended)
#    - Never commit secrets to version control
#
# 2. RSA Keys for Production:
#    - Use 2048-bit minimum key size
#    - Store private keys securely (environment variables or vault)
#    - Public keys can be exposed for verification
#    - Consider key rotation strategy
#
# 3. Environment Variables:
#    - Use different secrets for dev/staging/production
#    - Set VITE_NODE_ENV=production for production builds
#    - Enable HTTPS in production (JWT tokens contain sensitive data)
#    - Set appropriate CORS origins
#
# 4. Token Security:
#    - Keep expiration times short (2 hours recommended)
#    - Implement token refresh if needed
#    - Log token generation and validation events
#    - Monitor for suspicious activity
#
# 5. Rate Limiting:
#    - Implement rate limiting on token generation endpoints
#    - Monitor and alert on unusual token generation patterns
#    - Consider IP-based and user-based limits

# =====================================================
# EXAMPLE PRODUCTION VALUES
# =====================================================

# Example for production environment:
# VITE_USE_REAL_JWT=true
# VITE_NODE_ENV=production
# VITE_JWT_SECRET_DEV=development-only-not-used-in-production
# VITE_JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYourActualPrivateKeyHere...\n-----END RSA PRIVATE KEY-----"
# VITE_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nYourActualPublicKeyHere...\n-----END PUBLIC KEY-----"
# VITE_JWT_ISSUER=ready-or-not-production-sso
# VITE_JWT_AUDIENCE=ready-or-not-production
# VITE_JWT_EXPIRATION_HOURS=2
# VITE_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =====================================================
# MIGRATION FROM PHASE 3 TO PHASE 4
# =====================================================

# Phase 4 is backward compatible with Phase 3
# Existing SSO functionality continues to work with mock tokens when VITE_USE_REAL_JWT=false
# Gradually migrate to real JWT by setting VITE_USE_REAL_JWT=true after testing